# Train2 상태 벡터(164차원) 설명

`reg_i_player.py`의 `embed_battle`/`describe_embedding`에서 생성되는 164차원 관측 벡터를 항목별로 정리했다. 순서는 코드의 생성 순서와 동일하다.

## 구성 요약
- 내 액티브 포켓몬: 28
- 상대 액티브 포켓몬: 28
- 기술 슬롯 4개 × 4특징: 16
- 팀 요약: 5
- 벤치(내 2 + 상대 2) × 9특징: 36
- 함정 플래그(내/상대): 8
- 전투 흐름/필드 상태: 43
- **총합: 164**

## 세부 항목
### 1) 액티브 포켓몬 (각 28)
- HP 비율: 1  
- 상태이상 원-핫: 7 (`none`, 화상, 마비, 수면, 독, 얼음, 맹독)
- 종족값(HP/Atk/Def/SpA/SpD/Spe) 정규화: 6 (각/255)
- 랭크(Atk/Def/SpA/SpD/Spe/Acc/Eva) 정규화: 7 (각/6)
- 기절 여부: 1
- 테라 가능 여부, 이미 테라 여부: 2  
  - 내 포켓몬: `can_tera`, `is_terastallized`  
  - 상대 포켓몬: `not opponent_used_tera`, `is_terastallized`
- 선택 아이템 착용 여부(밴드/스펙/스카프): 1
- 선택 락/기술 락(Effect.LOCKED_MOVE) 여부: 1
- 하품(Yawn) 적용 여부: 1
- 멸망의 노래 카운트(3→0을 0~1로 정규화): 1

### 2) 기술 정보 (16)
- 슬롯 0~3 각각에 대해 4값:  
  - 위력/150  
  - 타입 상성 배수(상대 액티브 기준)  
  - 명중(참이면 1.0, 숫자는 /100)  
  - 남은 PP/최대 PP  
  - 슬롯이 비어 있으면 0으로 채움

### 3) 팀 요약 (5)
- 내 생존 수/3, 내 기절 수/3: 2
- 상대 생존 수/3, 상대 기절 수/3: 2
- 생존 수 차이(내-상대)/3: 1

### 4) 벤치 정보 (36)
- 한 포켓몬당 9값: `HP 비율`, `기절 여부`, `상태이상 원-핫 7개`
- 내 벤치 2슬롯 + 상대 벤치 2슬롯 = 4 × 9 = 36  
  - 빈 슬롯은 `HP=0`, `기절=1`, `status none=1`로 채움

### 5) 함정 플래그 (8)
- 상대 필드: 스텔스록, 독찌르개, 맹독스파이크, 끈끈이거미줄: 4
- 내 필드: 동일 4

### 6) 전투 흐름/필드 상태 (43)
- 턴 번호(최대 40으로 클램프 후 /40): 1
- 테라 가능 여부(내, 상대 미사용 여부): 2
- 강제 교체 여부: 1
- 날씨 원-핫(없음+8종), 지속턴/8, 날씨 무효화(Air Lock/Cloud Nine): 11
- 지면(없음+4종), 지속턴/8: 6
- 룸/필드 플래그: 트릭룸, 그래비티, 매직룸, 원더룸: 4
- 사이드 컨디션(양측 각 9개, 총 18):  
  - 스텔스록, 스파이크(0~3), 독스파이크(0~2), 끈끈이거미줄  
  - 순풍, 오로라베일, 리플렉터, 빛의장막, 신비의부적
